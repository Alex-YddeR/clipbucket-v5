!function(){"use strict";var e=null;e=void 0===window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(e,t){var s,l={},r={},n={};function i(e,t,s,l){return r={label:s,sources:t},"function"==typeof l?l(e,t,s):(e.src(t.map((function(e){return{src:e.src,type:e.type,res:e.res}}))),e)}var o=t.getComponent("MenuItem");class a extends o{constructor(e,t,s,l){super(e,t),this.onClickListener=s,this.label=l,this.src=t.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAsLabel(),this.selected(!0),this.addClass("vjs-selected"))}showAsLabel(){this.label&&(this.label.innerHTML=this.options_.label)}onClick(e){this.onClickListener(this);var t=this.player_.currentTime(),s=this.player_.paused();this.showAsLabel(),this.addClass("vjs-selected"),"function"!=typeof e&&"function"==typeof this.options_.customSourcePicker&&(e=this.options_.customSourcePicker);var l="loadeddata";"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(l="timeupdate"),i(this.player_,this.src,this.options_.label,e).one(l,(function(){this.player_.currentTime(t),s||this.player_.play(),this.player_.handleTechSeeked_(),this.player_.trigger("resolutionchange"),1===$(".vjs-menu-item.vjs-selected .vjs-menu-item-text").closest(".vjs-menu.vjs-hidden").first().length&&$(".vjs-menu-item.vjs-selected .vjs-menu-item-text").closest(".vjs-menu.vjs-hidden").first().removeClass("vjs-hidden")}))}}t.registerComponent("ResolutionMenuItem",a);var c=t.getComponent("MenuButton"),u="";class h extends c{constructor(e,s,l,r){if(u=s.sources,super(e,s,s,l),this.controlText(lang_quality),this.label=r,this.label.innerHTML=s.initialySelectedLabel,l.dynamicLabel)this.el().appendChild(r);else{var n=document.createElement("span");t.dom.addClass(n,"vjs-resolution-button-staticlabel"),this.el().appendChild(n)}}createItems(){var e=[],t=u&&u.label||{},s=function(t){e.map((function(e){e.selected(e===t),e.removeClass("vjs-selected")}))};for(var l in t)t.hasOwnProperty(l)&&(e.push(new a(this.player_,{label:l,src:t[l],initialySelected:l===this.options_.initialySelectedLabel,customSourcePicker:this.options_.customSourcePicker},s,this.label)),n[l]=e[e.length-1]);return e}}t.registerComponent("ResolutionMenuButton",h),s=function(e){var s=t.obj.merge(l,e),o=this,a=document.createElement("span"),c={};function u(e,t){return e.res&&t.res?+t.res-+e.res:0}function d(e){var t={label:{},res:{},type:{}};return e.map((function(e){y(t,"label",e),y(t,"res",e),y(t,"type",e),p(t,"label",e),p(t,"res",e),p(t,"type",e)})),t}function y(e,t,s){null==e[t][s[t]]&&(e[t][s[t]]=[])}function p(e,t,s){e[t][s[t]].push(s)}t.dom.addClass(a,"vjs-resolution-button-label"),o.updateSrc=function(e){if(!e)return o.src();o.controlBar.resolutionSwitcher&&(o.controlBar.resolutionSwitcher.dispose(),delete o.controlBar.resolutionSwitcher),e=e.sort(u);var l=function(e,t){var l=s.default,r="";"high"===l?(l=t[0].res,r=t[0].label):"low"!==l&&null!=l&&e.res[l]?e.res[l]&&(r=e.res[l][0].label):(l=t[t.length-1].res,r=t[t.length-1].label);return{res:l,label:r,sources:e.res[l]}}(c=d(e),e),r=new h(o,{sources:c,initialySelectedLabel:l.label,initialySelectedRes:l.res,customSourcePicker:s.customSourcePicker},s,a);return t.dom.addClass(r.el(),"vjs-resolution-button"),o.controlBar.resolutionSwitcher=o.controlBar.el_.insertBefore(r.el_,o.controlBar.getChild("fullscreenToggle").el_),o.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)},i(o,l.sources,l.label)},o.currentResolution=function(e,t){return null==e?r:(null!=n[e]&&n[e].onClick(t),o)},o.getGroupedSrc=function(){return c},o.ready((function(){o.options_.sources.length>1&&o.updateSrc(o.options_.sources),"Youtube"===o.techName_&&function(e){e.tech_.ytPlayer.setPlaybackQuality("default"),e.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",(function(){e.trigger("resolutionchange")})),e.one("play",(function(){var t=e.tech_.ytPlayer.getAvailableQualityLevels(),l={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"default"}},r=[];t.map((function(t){r.push({src:e.src().src,type:e.src().type,label:l[t].label,res:l[t].res,_yt:l[t].yt})}));var n="auto",i=0,o=((c=d(r)).label.auto,new h(e,{sources:c,initialySelectedLabel:n,initialySelectedRes:i,customSourcePicker:function(t,s,l){return e.tech_.ytPlayer.setPlaybackQuality(s[0]._yt),e}},s,a));o.el().classList.add("vjs-resolution-button"),e.controlBar.resolutionSwitcher=e.controlBar.addChild(o)}))}(o)}))},t.registerPlugin("videoJsResolutionSwitcher",s)}(window,e)}();