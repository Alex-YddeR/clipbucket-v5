!function(a){a._cb=new function(){this.baseurl=baseurl,this.imageurl="",this.page="/ajax.php",this.loading_img="<img alt='loading' style='vertical-align:middle' src='"+imageurl+"/ajax-loader-big.gif'/>",this.loading=this.loading_img+" Loading...",this.download=0,this.total_size=0,this.cur_speed=0,this.status_refesh=1,this.result_page="/actions/file_results.php",this.download_page="/actions/file_downloader.php",this.count=0,this.hasLoaded=!1,this.perc_download=0,this.force_stop=!1,this.remoteObjID="",this.current_menu="",this.collectionID=!1,this.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.ua=navigator.userAgent.toLowerCase(),this.ua.indexOf(" chrome/")>=0||this.ua.indexOf(" firefox/")>=0||this.ua.indexOf(" gecko/"),this.setRemoteId=function(){this.remoteObjID=this.randomString()},this.Confirm_Delete=function(a){confirm("Are you sure you want to delete")&&(document.location=a)},this.Confirm_Uninstall=function(a){confirm("Are you sure you want to uninstall this plugin ?")&&(document.location=a)},this.confirm_it=function(a){return!!confirm(a)},this.reloadImage=function(a,b){(img=document.getElementById(b)).src=a+"?"+Math.random()},this.randomString=function(){for(var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",b="",c=0;c<8;c++){var d=Math.floor(Math.random()*a.length);b+=a.substring(d,d+1)}return b},this.check_remote_url=function(){var b=this,a=$("#remote_file_url").val(),c=$("#ytUploadBttn"),d=$("#remoteUploadBttn"),e=$("#remoteUploadBttnStop");if(this.force_stop=!1,a.match(/^e.g/)|| void 0===a||0===a.length)return $("#error_msgs").html('<div class="alert alert-danger" role="alert">Given URL is invalid!</div>'),!1;var f=function(a){void 0!==a?(e.removeAttr("disabled").hide(),c.removeAttr("disabled"),d.removeAttr("disabled").show()):($(".downloadStatusContainer").addClass("hidden"),e.removeAttr("disabled").hide(),c.removeAttr("disabled"),d.removeAttr("disabled").show())};$(".downloadStatusContainer").removeClass("hidden"),d.attr("disabled","disabled").hide(),c.attr("disabled","disabled"),e.show();var g=$.ajax({url:b.download_page,type:"post",data:{file:a,file_name:file_name},dataType:"JSON",beforeSend:function(){b.remoteUploadStatusUpdate();var c=b.getName(a);$("#loading").html("Downloading"),$("#remoteFileName").replaceWith('"'+c+'"')},success:function(a){if(b.force_stop=!0,a.error)return f(),$("#error_msgs").html('<div class="alert alert-danger" role="alert"> File Type Not Allowed!</div>'),!1;f(),$("#loading").html("");var c=a.vid;$.post("/actions/getVideoDetails.php",{file_name:file_name,vid:c},function(d){var a=$("#updateVideoInfoForm").clone();$(a).find("input[name=title]").val(d.title),$(a).find("textarea#desc").val(d.description),$(a).find("input[name='category[]']:first").attr("checked","checked");var b=document.createElement("input");b.name="videoid",b.type="hidden",b.value=c,$(a).append(b),$("#remoteForm").html(""),$(a).removeClass("hidden").attr("id","uploadFormContainer_remote").appendTo("#remoteForm"),$(a).find("form").on({submit:function(b){b.preventDefault();var c=$(this),a=$(c).serialize();a+="&updateVideo=yes",$.ajax({url:"/actions/file_uploader.php",type:"post",data:a,success:function(a){msg=$.parseJSON(a),$("#uploadMessage").removeClass("hidden"),msg.error?$("#uploadMessage").html(msg.error).attr("class","alert alert-danger"):$("#uploadMessage").html(msg.msg).attr("class","alert alert-success"),setTimeout(function(){$("#uploadMessage").addClass("hidden")},5e3)}})}}),$(".formSection h4").on({click:function(a){a.preventDefault(),$(this).find("i").hasClass("glyphicon-chevron-down")?($(this).find("i").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up"),$(this).next().toggleClass("hidden")):($(this).find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"),$(this).next().toggleClass("hidden"))}}),$(a).on({submit:function(b){b.preventDefault();var a=$(this).serialize();a+="&updateVideo=yes",$.ajax({url:"/actions/file_uploader.php",type:"post",data:a,dataType:"json",success:function(a){$("#uploadMessage").removeClass("hidden"),a.error?$("#uploadMessage").html(a.error).attr("class","alert alert-danger"):$("#uploadMessage").html(a.msg).attr("class","alert alert-success"),setTimeout(function(){$("#uploadMessage").addClass("hidden")},5e3)}}).fail(function(a){console.log(a)})}})},"json")}});$("#remoteUploadBttnStop").click(function(){g.abort(),this.force_stop=!0,$("#loading").html(""),$("#remoteDownloadStatus").hide(),$(this).hide(),$("#remoteUploadBttn").attr("disabled","").show()})},this.remoteUploadStatusUpdate=function(){var a=this;$.ajax({url:a.result_page,type:"post",data:{file_name:file_name},dataType:"json",success:function(b){!1===a.force_stop&&(a.updateProgress(b),setTimeout(function(){a.remoteUploadStatusUpdate()},1e3*a.status_refesh))}})},this.updateProgress=function(a){if(null!=a){var b=(a.downloaded/1048576).toFixed(2),c=(a.total_size/1048576).toFixed(2),d=a.downloaded/a.total_size*100;$("#downloadStatus").find("#downloaded").text(b+" Mb"),$("#downloadStatus").find("#totalSize").text(c+" Mb"),$("#prog_bar").css("width",d+"%")}},this.youtube_check_url=function(){var a=$("#remote_file_url").val();return $("#ytUploadBttn"),$("#remoteUploadBttn"),$("#remoteUploadBttnStop"),this.force_stop=!1,!a.match(/^e.g/)&& void 0!==a&&0!==a.length||($("#error_msgs").html('<div class="alert alert-danger" role="alert"> Please enter valid URL !</div>'),!1)},this.youtube_upload=function(){if(!this.youtube_check_url())return!1;$("#remoteUploadBttn").attr("disabled","disabled"),$("#ytUploadBttn").attr("disabled","disabled");var a=$("#remote_file_url").val();if(force_stop=!1,!a||"undefined"==a)return alert("Please enter file url"),$("#remoteUploadBttn").attr("disabled",""),$("#ytUploadBttn").attr("disabled",""),!1;$.ajax({url:download_page,type:"POST",data:{file:a,file_name:file_name,youtube:"yes"},dataType:"json",beforeSend:function(){$("#loading").html('<div style="float: left; display: inline-block;"><img alt="loading" src="'+imageurl+'/ajax-loader.gif"/></div><div style="float: left; line-height: 16px; padding-left:5px">Uploading video from youtube, please wait...</div><div class="clear"></div>')},success:function(a){a.error?(force_stop=!0,$("#remoteUploadBttn").attr("disabled",""),$("#ytUploadBttn").attr("disabled",""),alert(a.error)):a.vid&&(alert("this is checked success"),vid=a.vid,$("#remoteUploadBttn").attr("disabled","disabled").hide(),$("#ytUploadBttn").attr("disabled","disabled").hide(),$.post("/actions/file_uploader.php",{getForm:"get_form",title:a.title,desc:a.desc,tags:a.tags,objId:remoteObjID},function(a){$("#remoteForm").append(a),$("#cbSubmitUpload"+remoteObjID).before('<span id="updateVideoDataLoading" style="margin-right:5px"></span>').attr("disabled","").attr("value",lang.saveData).attr("onClick","doUpdateVideo('#uploadForm"+remoteObjID+"','"+remoteObjID+"')").after('<input type="hidden" name="videoid" value="'+vid+'" id="videoid"/>').after('<input type="hidden" name="updateVideo" value="yes" id="updateVideo"/>')},"text")),$("#loading").html("")}})},this.status_update=function(){var a=this;$.ajax({url:a.result_page,type:"post",data:{file_name:file_name},dataType:"json",success:function(b){if(b){var d,e=parseFloat(b.total_size),g=parseFloat(b.downloaded),h=parseFloat(b.total_size_fm),f=parseFloat(b.downloaded_fm),c=parseFloat(b.speed_download);parseFloat(b.time_eta);var i=parseFloat(b.time_eta_fm);parseFloat(b.time_took);var j=parseFloat(b.time_took_fm);d=c/1024/1024>1?Math.round(c/1024/1024)+" Mbps":Math.round(c/1024)+" Kbps",a.perc_download=Math.round(g/e*100),isNaN(f)?($("#remoteDownloadStatus").show(),$("#prog_bar").html("Loading"),$("#dspeed").html("Loading"),$("#eta").html("Loading"),$("#status").html("Loading")):($("#remoteDownloadStatus").show(),$("#prog_bar").html(a.perc_download+"%").animate({width:a.perc_download+"%"},1e3),$("#dspeed").html(d),$("#eta").html(i),$("#status").html(f+" of "+h))}var k=1e3*a.status_refesh;a.perc_download>99&&(a.force_stop=!0),a.force_stop?100==a.perc_download&&e>1&&$("#time_took").html("Time Took : "+j):setTimeout(function(){a.status_update()},k)}})},this.upload_file=function(a,b){$.post("/actions/file_downloader.php",{file_url:a,file_name:b},function(a){a?submit_upload_form():alert("No data")},"text")},this.delete_item=function(a,b,c,d){$("#"+a+"-"+b).click(function(){confirm(c)&&(document.location=d)})},this.delete_video=function(a,b,c,d){return delete_item(a,b,c,d)},this.get_video=function(b,a){$(a).css("display","block"),$(a).html(this.loading),$(a).html(this.loading),$.post(page,{mode:b},function(b){$(a).html(b)},"text")},this.getAjaxPhoto=function(b,a){$(a).css("display","block");var c=$(a).html();$.ajax({url:this.page,type:"POST",dataType:"json",data:{mode:"loadAjaxPhotos",photosType:b},beforeSend:function(){$(a).html(this.loading)},success:function(b){b.failed&&$(a).html(c),b.completed&&$(a).html(b.photoBlocks)}})},this.rating_over=function(a,b){"disabled"!==b&&$("#rating_result_container").html(a)},this.rating_out=function(a,b){"disabled"!==b&&$("#rating_result_container").html(a)},this.submit_share_form=function(b,a){$("#share_form_results").css("display","block").html(this.loading),$.post(page,{mode:"share_object",type:a,users:$("#ShareUsers").val(),message:$("#message").val(),id:$("#objectid").val()},function(a){a?$("#share_form_results").html(a):alert("No data")},"text")},this.flag_object=function(a,b,c){$("#flag_form_result").css("display","block").html(this.loading),$.post(page,{mode:"flag_object",type:c,flag_type:$("#"+a+" select option:selected").val(),id:b},function(a){a?$("#flag_form_result").css("display","block").html(a):alert("No data")},"text")},this.slide_up_watch_video=function(a){"block"!==$(".video_action_result_boxes "+a).css("display")&&$(".video_action_result_boxes > *").slideUp()},this.add_to_fav=function(a,b){$("#video_action_result_cont").css("display","block").html(this.loading),$.post(page,{mode:"add_to_fav",type:a,id:b},function(a){a?$("#video_action_result_cont").css("display","block").html(a):alert("No data")},"text")},this.subscriber=function(a,b,c){$("#"+c).css("display","block").html(this.loading),$.post(page,{mode:b,subscribe_to:a},function(a){a?$("#"+c).css("display","block").html(a):alert("No data")},"text")},this.add_friend=function(a,b){$("#"+b).css("display","block").html(this.loading),$.post(page,{mode:"add_friend",uid:a},function(a){a?$("#"+b).css("display","block").html(a):alert("No data")},"text")},this.block_user=function(a,b){$("#"+b).css("display","block").html(this.loading),$.post(page,{mode:"ban_user",user:a},function(a){a?$("#"+b).css("display","block").html(a):alert("No data")},"text")},this.rate_comment=function(a,b,c,d){$.post(page,{mode:"rate_comment",thumb:b,cid:a,type:c,typeid:d},function(b){b?(""!==b.msg&&alert(b.msg),""!==b.rate&&$("#comment_rating_"+a).html(b.rate)):alert("No data")},"json")},this.delete_comment=function(a,b){$.post(page,{mode:"delete_comment",cid:a,type:b},function(b){b?(b.msg&&(alert(b.msg),$("#comment_"+a).fadeOut("slow"),$("#spam_comment_"+a).fadeOut("slow")),b.err&&alert(b.err)):alert("No data")},"json")},this.add_comment_js=function(a,c){$("#add_comment_result").css("display","block").html(this.loading),$("#add_comment_button").attr("disabled","disabled");var b=$("#"+a).serialize()+"&mode=add_comment";$.post(page,b,function(a){a?($("#add_comment_button").attr("disabled","").css("display","block"),""!==a.err&&$("#add_comment_result").html(a.err),""!==a.msg&&$("#add_comment_result").html(a.msg),a.cid&&get_the_comment(a.cid,"#latest_comment_container")):alert("No data")},"json")},this.get_the_comment=function(a,b){$(b).html(this.loading),$.post(page,{mode:"get_comment",cid:a},function(a){a?($(b).css("display","none"),$(b).html(a).fadeIn("slow")):alert("No data")},"text")},this.add_playlist=function(c,a,d,b){switch($("#playlist_form_result").css("display","block").html(this.loading),c){case"add":$.post(page,{mode:"add_playlist",id:a,objtype:b,pid:$("#playlist_id option:selected").val()},function(a){a?(""!==a.err&&$("#playlist_form_result").css("display","block").html(a.err),""!==a.msg&&($("#playlist_form_result").css("display","block").html(a.msg),$("#"+d).css("display","none"))):alert("No data")},"json");break;case"new":$.post(page,{mode:"add_new_playlist",id:a,objtype:b,plname:$("#playlist_name").val()},function(a){a?(a.err&&$("#playlist_form_result").css("display","block").html(a.err),a.msg&&($("#playlist_form_result").css("display","block").html(a.msg),$("#"+d).css("display","none"))):alert("No data")},"json")}},this.add_quicklist=function(a,b){var c=this;$(a).attr("src",c.imageurl+"/ajax-loader.gif"),$(a).css("background-position","-200px 200px"),$.post(page,{mode:"quicklist",todo:"add",vid:b},function(b){b?($(a).attr("src",c.imageurl+"/dot.gif"),$(a).css("background-position","-0px -0px"),$(a).removeClass("add_icon"),$(a).addClass("check_icon"),$(a).removeAttr("onClick"),load_quicklist_box()):alert("No data")},"text")},this.remove_quicklist=function(b,a){$.post(page,{mode:"quicklist",todo:"remove",vid:a},function(a){a?($(b).slideUp(),$(b).hide()):alert("No data")},"text")},this.load_quicklist_box=function(){$.post(page,{mode:"getquicklistbox"},function(a){(a=$.trim(a))?($("#quicklist_box").css("display","block").html(a),"hide"!==$.cookie("quick_list_box")&&$("#quicklist_cont").css("display","block")):$("#quicklist_box").css("display","none")},"text")},this.clear_quicklist=function(){$.post(page,{mode:"clear_quicklist"},function(a){load_quicklist_box()},"text")},this.quick_show_hide_toggle=function(a){$(a).slideToggle(),"show"===$.cookie("quick_list_box")?set_cookie_secure("quick_list_box","hide"):set_cookie_secure("quick_list_box","show")},this.ini_cookies=function(){$.cookie("quick_list_box")||set_cookie_secure("quick_list_box","show")},this.get_group_info=function(a,b){"none"===$(a).css("display")&&($("#group_info_cont > div").slideUp(),$("#group_info_cont "+a).slideDown(),$(".group_detail_tabs .selected").removeClass("selected"),$(b).addClass("selected"))},this.show_menu=function(b,c){if(a.location.hash&&c)return show_menu(a.location.hash.substr(9),!1),!1;a.location.hash="current_"+b,this.current_menu!==b&&hide_menu(),$("#"+b).show(),this.current_menu=b,$("."+b).addClass("selected")},this.hide_menu=function(){if(""!==this.current_menu)return $("#"+this.current_menu).hide(),$("."+this.current_menu).removeClass("selected"),!0},this.to_reply=function(b){$("#reply_to").val(b),a.location="#add_comment"},this.spam_comment=function(a,b,c){$.post(page,{mode:"spam_comment",cid:a,type:b,typeid:c},function(b){b?(b.msg&&($("#comment_"+a).hide(),$("#spam_comment_"+a).fadeIn("slow")),b.err&&alert(b.err)):alert("No data")},"json")},this.swap_auto_play=function(){"true"===$.cookie("auto_play_playlist")?(set_cookie_secure("auto_play_playlist","false"),a.location=document.location,$("#ap_status").html("off")):($.cookie("auto_play_playlist","true",{path:"/"}),a.location=document.location,$("#ap_status").html("on"))},this.collection_actions=function(b,a,c,d,e,f){switch($(d).css("display","block"),$(d).html(this.loading),a){case"add_new_item":$.post(page,{mode:a,cid:$("#"+b+" #collection").val(),obj_id:c,type:e},function(a){a?(a.msg&&$(d).html(a.msg),a.err&&$(d).html(a.err)):alert("No Data returned")},"json");break;case"remove_collection_item":$("#"+b).hide(),$.post(page,{mode:a,obj_id:c,type:e,cid:f},function(a){a?(a.err&&(alert(a.err),$(d+"_"+c).hide(),$("#"+b+c).show()),a.msg&&($(d).html(a.msg),$("#"+b+"_"+c).slideUp(350))):(alert("No Data Returned"),$(d+"_"+c).hide(),$("#"+b).show())},"json")}return!1},this.openURL=function(a){document.locati=a},this.get_item=function(a,b,c,d,e){var f=$(a).html();$(a).html(this.loading),$.post(page,{mode:"get_item",ci_id:b,cid:c,type:d,direction:e},function(b){if(b){var c=new Array(d,b.cid,b.key);construct_url(c),$("#collectionItemView").html(b.content)}else alert("No "+d+" returned"),$(a).text(f)},"json")},this.construct_url=function(b){var c;"yes"===Seo?(c="#!/item/"+b[0]+"/"+b[1]+"/"+b[2],a.location.hash=c):(c="#!?item="+b[2]+"&type="+b[0]+"&collection="+b[1],a.location.hash=c)},this.onReload_item=function(){var b,c;a.location.hash&&(b=a.location.href,"yes"===Seo?(c=RegExp("/item.+#!")).test(b)&&(b=b.replace(c,""),a.location.href=b):(c=RegExp("\\?item.+#!")).test(b)&&(b=b.replace(c,""),a.location.href=b))},this.pagination=function(c,d,e,f){var g=this,a=$(c),b=(a.id,a.parent()),h=a.html();b.attr("id")?parent.attr("id"):(b.attr("id","loadMoreParent"),b.attr("id")),$.ajax({url:g.page,type:"post",dataType:"json",data:{mode:"moreItems",page:f,cid:d,type:e},beforeSend:function(){a.removeAttr("onClick"),a.html(g.loading)},success:function(b){b.error?("BUTTON"===c.tagName&&a.attr("disabled","disabled"),a.removeAttr("onClick"),a.html("No more "+e)):($("#collectionItemsList").append(b.content),$("#NewPagination").html(b.pagination),a.html(h))}})},this.ajax_add_collection=function(a){var b=$("#"+a.form.id),c=$(a),d=c.html(),e=$("#CollectionResult");$.ajax({url:this.page,type:"post",dataType:"json",data:"mode=add_collection&"+b.serialize(),beforeSend:function(){"block"===e.css("display")&&e.slideUp("fast"),c.attr("disabled","disabled"),c.html(this.loading)},success:function(a){a.msg?($("#CollectionDIV").slideUp("fast"),e.html(a.msg).slideDown("fast"),this.collectionID=a.id):(e.html(a.err).slideDown("fast"),c.removeAttr("disabled"),c.html(d))}})},this.getDetails=function(b){var a=getInputs(b),c=new Array(a.length);return $.each(a,function(a,b){query=$("#"+b.id+" *").serialize(),query+="&mode=ajaxPhotos",c[a]=query}),c},this.getName=function(a){return a.substring(a.lastIndexOf("/")+1)},this.viewRatings=function(a,b){var c=$(a),d=c.html();document.getElementById("RatingStatContainer")?$("#RatingStatContainer").toggle():loadAjax=$.ajax({url:page,type:"post",dataType:"text",data:{mode:"viewPhotoRating",photoid:b},beforeSend:function(){c.html(this.loading)},success:function(a){c.html(d),a?$("<div/>").attr("id","RatingStatContainer").addClass("clearfix").css({padding:"8px",font:"normal 11px Tahoma",border:"1px solid #ccc",backgroundColor:"#FFF"}).html(a).fadeIn(350).insertAfter(c):(c.removeAttr("onclick"),alert("Photo has not recieved any rating yet."))}})},this.showAdvanceSearch=function(b,c,d,e){$("#"+b);var a=$("#"+c),f=$("#SearchType").val();a.toggle(),"block"===a.css("display")&&a.children().hide().filter("#"+f).show(),$("."+d).toggleClass(e)},this.toggleCategory=function(g,h){var b=$(g),c=b.attr("alt"),a=$("#"+c),d=c.split("_")[0],e=$.browser.msie,f=$.browser.version;"none"===a.css("display")?(a.slideDown(350),e&&"7.0"===f&&a.addClass("internetExplorer7CategoryToggleFix"),set_cookie_secure(d,"expanded"),b.removeClass("none").addClass("block")):(a.slideUp(350),e&&"7.0"===f&&a.removeClass("internetExplorer7CategoryToggleFix"),set_cookie_secure(d,"collapsed"),b.removeClass("block").addClass("none"))},this.loadObject=function(b,c,d,e){var a=new Array(4);a.this=b,a.type=c,a.objID=d,a.container=e;var f=$(a.this);f.parent().css("position","relative"),$.ajax({url:this.page,type:"POST",dataType:"json",data:{mode:"channelFeatured",contentType:a.type,objID:a.objID},beforeSend:function(){f.find("img").animate({opacity:.5}),$("#"+a.container).animate({opacity:.5})},success:function(b){b.error?(f.find("img").animate({opacity:1}),$("#"+a.container).animate({opacity:1}),alert(b.error)):(f.parent().children(".selected").removeClass("selected"),f.addClass("selected"),f.find("img").animate({opacity:1}),$("#"+a.container).html(b.data).animate({opacity:1}))}})},this.getComments=function(a,b,c,d,e,f,g){$("#comments").html("<div style='padding:5px 0;'>"+this.loading+"</div>"),$.ajax({type:"POST",url:this.page,data:{mode:"getComments",page:d,type:a,type_id:b,object_type:f,last_update:c,total_comments:e,comments_voting:"no",admin:g},success:function(a){$("#comments").hide().html(a).fadeIn("slow")},dataType:"text"})},this.checkUncheckAll=function(c){var b=c.form,a=0;for(a=0;a<b.length;a++)"checkbox"===b[a].type&&"checkall"!==b[a].name&&(b[a].checked=c.checked)},this.rate=function(a,b,c){$.post("/ajax.php",{mode:"rating",id:a,rating:b,type:c},function(a){a?$("#rating_container").html(a):alert("No data")},"text")},this.setPageHash=function(b){var c=b.replace(this.baseurl,"");a.location.hash.replace("#!",""),a.location.hash="#!"+c},this.callURLParser=function(){var b=a.location.href.match(/(\#![/a-zA-Z0-9=\.\&\-\_\?]*)/g);b&&b[b.length-1]&&(a.location.href=this.lastVisited.replace("#!",""))},this.groupsAjax=function(f,b,d){f.preventDefault();var a,c,g,e=!1;if(void 0===d&&(d="ajaxGroupResultContainer"),b.href?(c=b.href,e=!0,a=$(b)):(c=b.childNodes[0].href,a=$(b.childNodes[0]),b.childNodes[0]),"undefined"===c)return alert("URL not found"),!1;g=a.html(),setPageHash(c),!0===e?(a.parent().parent().children().filter(".selected").removeClass("selected"),a.parent().addClass("selected")):(a.parent().children().filter(".selected").removeClass("selected"),a.addClass("selected")),a.html(this.loading_img),$("#"+d).on("load",c+" #"+d,function(b,c,d){a.html(g),document.getElementById("flag_item")&&$("#flag_item").show()})},this.encode64=function(a){for(var f,b,c,h,i,g,d,j=nStringMaker(),e=0;e<a.length;)f=a.charCodeAt(e++),b=a.charCodeAt(e++),c=a.charCodeAt(e++),h=f>>2,i=(3&f)<<4|b>>4,g=(15&b)<<2|c>>6,d=63&c,isNaN(b)?g=d=64:isNaN(c)&&(d=64),j.append(this.keyStr.charAt(h)+this.keyStr.charAt(i)+this.keyStr.charAt(g)+this.keyStr.charAt(d));return j.toString()},this.decode64=function(a){var g,h,i,j,e,c,f,d=nStringMaker(),b=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");b<a.length;)j=this.keyStr.indexOf(a.charAt(b++)),e=this.keyStr.indexOf(a.charAt(b++)),c=this.keyStr.indexOf(a.charAt(b++)),f=this.keyStr.indexOf(a.charAt(b++)),g=j<<2|e>>4,h=(15&e)<<4|c>>2,i=(3&c)<<6|f,d.append(String.fromCharCode(g)),64!=c&&d.append(String.fromCharCode(h)),64!=f&&d.append(String.fromCharCode(i));return d.toString()},this.getAllComments=function(a,b,c,d,e,f,g){$("#userCommentsList").html("<div style='padding:5px 0;'>"+loading+"</div>"),$.ajax({type:"POST",url:page,data:{mode:"getComments",page:d,type:a,type_id:b,object_type:f,last_update:c,total_comments:e,comments_voting:"no",admin:g},success:function(a){$("#userCommentsList").html(a)},dataType:"text"})},this.getCommentsNew=function(a,b,c,d,e,f,g){$.ajax({type:"POST",url:page,data:{mode:"getCommentsNew",page:d,type:a,type_id:b,object_type:f,last_update:c,total_comments:e,comments_voting:"no",admin:g},beforeSend:function(){$(document).find("#load-more-comments").text(lang_loading)},success:function(a){"none"===a?$("#load-more-comments").text("End of comments list").attr("disabled","disabled"):($("#userCommentsList").append(a),$(document).find("#load-more-comments").text(lang_load_more))},dataType:"text"})},this.addToFav=function(a,b){$("#messageFav").show(),$.post(page,{mode:"add_to_fav",type:a,id:b},function(a){a?($("#messageFav").html(a),setTimeout(function(){$("#messageFav").hide()},5e3)):alert("No data")},"text")},this.subscribeToChannel=function(a,b,c){$("#messageFav").show(),$.post(page,{mode:b,subscribe_to:a},function(a){a?($("#messageFav").html(a),setTimeout(function(){$("#messageFav").hide()},5e3)):alert("No data")},"text")},this.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},this.throwHeadMsg=function(b,c,a,d){$(document).find("#headErr").remove(),(a=parseInt(a))<10&&(a=3e3),b.length<3&&(b="info"),$('<div id="headErr" class="alert_messages_holder" style="display:none;"><div class="alert alert-'+b+' alert-messages alert-ajax" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+c+"</div></div>").insertAfter("#header").fadeIn("slow").delay(a).fadeOut()},this.rateNew=function(a,b,c){curObj=this,$.post("/ajax.php",{mode:"rating",id:a,rating:b,type:c},function(a){a?(likesSect=$(".likes").find("span:nth-child(2)").html(),dislikesSect=$(".dislikes").find("span:nth-child(2)").html(),currLikes=parseInt(likesSect),currDislikes=parseInt(dislikesSect),isError=$(a).find("span.error").html(),isOk=$(a).find("span.msg").html(),isError?isError.length>2&&curObj.throwHeadMsg("danger",isError,5e3,!0):isOk&&isOk.length>2&&(5==b?(newRating=currLikes+1,$(".likes").addClass("rated").find("span:nth-child(2)").html(newRating)):((newRating=currDislikes+1)<0&&(newRating=0),$(".dislikes").addClass("rated").find("span:nth-child(2)").html(newRating)),curObj.throwHeadMsg("success",isOk,5e3,!0))):alert("No data")},"text")},this.showMeTheMsg=function(a,b){curObj=this,isOk=!0==b?$(a).filter("div.msg").find("div.alert").html():$(a).filter("div.msg").html(),isError=$(a).filter("div.error").html(),isError?isError.length>2&&curObj.throwHeadMsg("danger",isError,5e3,!0):isOk&&isOk.length>2&&curObj.throwHeadMsg("success",isOk,5e3,!0)},this.subscribeToChannelNew=function(a,b){curObj=this,$.post(page,{mode:b,subscribe_to:a},function(a){a?curObj.showMeTheMsg(a):alert("No data")},"text")},this.add_friendNew=function(a,b){curObj=this,$("#"+b).css("display","block").html(this.loading),$.post(page,{mode:"add_friend",uid:a},function(a){a?($("#"+b).css("display","none"),curObj.showMeTheMsg(a)):alert("No data")},"text")},this.subscribeToChannelNew=function(a,b){var c=this;$.post(page,{mode:b,subscribe_to:a},function(a){a?c.showMeTheMsg(a):alert("No data")},"text")},this.add_to_favNew=function(a,b){var c=this;$("#video_action_result_cont").css("display","block").html(c.loading),$.post(page,{mode:"add_to_fav",type:a,id:b},function(a){a?($("#video_action_result_cont").hide(),c.showMeTheMsg(a,!0)):alert("No data")},"text")},this.flag_objectNew=function(a,b,c){var d=this;$("#flag_form_result").css("display","block").html(this.loading),$.post(page,{mode:"flag_object",type:c,flag_type:$("#"+a+" select option:selected").val(),id:b},function(a){a?($("#flag_form_result").hide(),d.showMeTheMsg(a)):alert("No data")},"text")},this.uploadSubtitle=function(c,d,b){if(b.length<5)return!1;var e=$("#captions").prop("files")[0],a=new FormData;a.append("subtitle_lang",d),a.append("file",e),a.append("videoid",c),$.ajax({type:"post",cache:!1,contentType:!1,processData:!1,url:b,data:a,beforeSend:function(){},success:function(a){}})},this.add_playlistNew=function(c,a,d,b){switch(curObj=this,$("#playlist_form_result").css("display","block").html("loading"),c){case"add":$.post(page,{mode:"add_playlist",id:a,objtype:b,pid:$("#playlist_id option:selected").val()},function(a){if($("#playlist_form_result").html(""),a){if(a.err.length>2){cleanedHtml=$.parseHTML(a.err);var b=$(cleanedHtml).html();curObj.throwHeadMsg("danger",b,5e3,!0)}if(a.msg.length>2){cleanedHtml=$.parseHTML(a.msg);var b=$(cleanedHtml).find("div.alert").html();curObj.throwHeadMsg("success",b,5e3,!0),$("#"+d).css("display","none")}}else alert("No data")},"json");break;case"new":$.post(page,{mode:"add_new_playlist",id:a,objtype:b,plname:$("#playlist_name").val()},function(a){a?(a.err&&$("#playlist_form_result").css("display","block").html(a.err),a.msg&&($("#playlist_form_result").css("display","block").html(a.msg),$("#"+d).css("display","none"))):alert("No data")},"json")}},this.getModalVideo=function(a){$.ajax({type:"post",url:"/ajax/commonAjax.php",data:{videoid:a,mode:"get_video"},dataType:"json",beforeSend:function(a){$(".my-modal-content").html('<div style="color:#fff;font-size:25px;padding:10px 10px 10px 10px;">'+loadingImg+"</div>")},success:function(a){if(a.success){var d=a.video_link,b=a.video_details;$(".my-modal-content").attr("id",b.videoid).html(a.video);var c=$(document).find("#cb_video_js_"+b.videoid+"_html5_api");c=c[0];var e=setInterval(function(){navigator.userAgent.match(/Android/i)||(c.play(),$(i).find(".uploaderName").append('<a href="'+d+'" title="Watch Video Page" style="margin:-2px 5px 0 0;"><i class="glyphicon glyphicon-log-in pull-right" style="font-size:20px;color:#fff;"></i></a>'));var h=!c.paused,i=$(document).find("#cb_video_js_"+b.videoid),a=$(document).find("video");if(a.length>0)for(var f=0;f<a.length;f++){var g=$(a[f]).attr("id").split("_");g=g[3],b.videoid!==g&&$(a[f])[0].pause()}h&&clearInterval(e),new_player_height(vid_id)},300)}else a.failure&&$(".my-modal-content").html('<div class="alert alert-warning">'+a.message+"</div>")}})},this.getPlayerEl=function(b){var a=$(document).find(".cb_video_js_"+b+"-dimensions");return!!a&&a[0]},this.unsubscribeToChannel=function(a,c){curObj=this;var b=document.getElementsByClassName("subs_"+a);b.length>0&&Array.prototype.forEach.call(b,function(a){a.disabled=!0}),$.post(page,{mode:c,subscribe_to:a},function(c){c?("err"===(c=JSON.parse(c)).typ?curObj.showMeTheMsg('<div class="error">'+c.msg+"</div>"):curObj.showMeTheMsg('<div class="msg">'+c.msg+"</div>"),c.severity<2?b.length>0&&Array.prototype.forEach.call(b,function(b){b.innerHTML=lang_subscribe,b.setAttribute("onclick","_cb.subscribeToChannelNew("+a+",'subscribe_user');"),b.disabled=!1,curObj.updateSubscribersCount(a)}):Array.prototype.forEach.call(b,function(a){a.disabled=!1})):alert("No data")},"text")},this.subscribeToChannelNew=function(a,c){var d=this,b=document.getElementsByClassName("subs_"+a);b.length>0&&Array.prototype.forEach.call(b,function(a){a.disabled=!0}),$.post(page,{mode:c,subscribe_to:a},function(c){c?("err"===(c=JSON.parse(c)).typ?d.showMeTheMsg('<div class="error">'+c.msg+"</div>"):d.showMeTheMsg('<div class="msg">'+c.msg+"</div>"),c.severity<2?b.length>0&&Array.prototype.forEach.call(b,function(b){b.innerHTML=lang_unsubscribe,b.setAttribute("onclick","_cb.unsubscribeToChannel("+a+",'unsubscribe_user');"),b.disabled=!1,d.updateSubscribersCount(a)}):Array.prototype.forEach.call(b,function(a){a.disabled=!1})):alert("No data")},"text")},this.updateSubscribersCount=function(a){$.post(page,{mode:"get_subscribers_count",userid:a},function(b){b?(subsObj=JSON.parse(b),$("#user_subscribers_"+a).html(subsObj.subscriber_count)):alert("No data")},"text")}},a._cb.setRemoteId()}(window)